{"version":3,"file":"index.js","sources":["../src/js/render-functions.js","../src/js/pixabay-api.js","../src/main.js"],"sourcesContent":["// Описаний у документації\nimport SimpleLightbox from 'simplelightbox';\n// Додатковий імпорт стилів\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nimport getImagesByQuery from './pixabay-api';\n\nconst gallery = document.querySelector('.gallery');\nexport const galBox = new SimpleLightbox('.gallery a', {\n  captionDelay: 250,\n});\n\nexport default function createMarkup(images) {\n  const markup = images\n    .map(\n      image =>\n        `<li class=\"gallery-item\">\n        <a href=\"${image.largeImageURL}\">\n          <img alt=\"${image.tags}\" src=\"${image.webformatURL}\" class=\"gallery-img\" />\n        </a>\n        <ul class=\"gallery-text-list\">\n          <li class=\"gallery-text-items\">\n            <h2 class=\"gallery-text-title\">Likes</h2>\n            <p class=\"gallery-text-parag\">${image.likes}</p>\n          </li>\n          <li class=\"gallery-text-items\">\n            <h2 class=\"gallery-text-title\">Views</h2>\n            <p class=\"gallery-text-parag\">${image.views}</p>\n          </li>\n          <li class=\"gallery-text-items\">\n            <h2 class=\"gallery-text-title\">Comments</h2>\n            <p class=\"gallery-text-parag\">${image.comments}</p>\n          </li>\n          <li class=\"gallery-text-items\">\n            <h2 class=\"gallery-text-title\">Downloads</h2>\n            <p class=\"gallery-text-parag\">${image.downloads}</p>\n          </li>\n        </ul>\n      </li>`\n    )\n    .join('');\n\n  gallery.insertAdjacentHTML('beforeend', markup);\n  galBox.refresh();\n}\n\nexport function clearGallery() {\n  gallery.innerHTML = '';\n}\n\nexport function showLoader() {\n  document.querySelector('.loader').classList.add('open');\n}\n\nexport function hideLoader() {\n  document.querySelector('.loader').classList.remove('open');\n}\n\nconst button = document.querySelector('.non-active');\n\nexport function showLoadMoreButton() {\n  button.classList.add('is-active');\n}\n\nexport function hideLoadMoreButton() {\n  button.classList.remove('is-active');\n}\n\nexport function loadMoreFunc(inputedValue) {\n  let page = 1;\n\n  const loadMoreBtn = document.querySelector('.non-active');\n  loadMoreBtn.addEventListener('click', onHandleClick);\n  function onHandleClick() {\n    page += 1;\n\n    getImagesByQuery(inputedValue, page);\n    const firstItem = document.querySelector('li');\n    if (!firstItem) return;\n    const height = firstItem.getBoundingClientRect().height;\n\n    setTimeout(() => {\n      window.scrollBy({\n        top: height * 2,\n        left: 0,\n        behavior: 'smooth',\n      });\n    }, 500);\n  }\n}\n","import axios from 'axios';\nimport createMarkup, {\n  hideLoadMoreButton,\n  showLoadMoreButton,\n} from './render-functions';\n// Описаний у документації\nimport iziToast from 'izitoast';\n// Додатковий імпорт стилів\nimport 'izitoast/dist/css/iziToast.min.css';\n\nconst gallery = document.querySelector('.gallery');\n\nexport default async function getImagesByQuery(query, page) {\n  const responce = await axios.get('https://pixabay.com/api/', {\n    params: {\n      key: '49632762-ccb8ac978f5dd2d4af8186ee2',\n      q: query,\n      image_type: 'photo',\n      orientation: 'horizontal',\n      safesearch: true,\n      per_page: 15,\n      page: page,\n    },\n  });\n  try {\n    createMarkup(responce.data.hits);\n    const loadMoreBtn = document.querySelector('.non-active');\n    const totalPages = Math.ceil(responce.data.totalHits / 15);\n    if (page < totalPages) {\n      loadMoreBtn.classList.add('is-active');\n    } else {\n      loadMoreBtn.classList.remove('is-active');\n    }\n  } catch (error) {\n    console.log(error.message);\n    iziToast.error({\n      message: 'Request error',\n      position: 'topRight',\n      timeout: 2000,\n      imageWidth: 50,\n      maxWidth: 432,\n      messageSize: '16px',\n      messageLineHeight: '24px',\n      messageColor: '#FAFAFB',\n      backgroundColor: '#EF4040',\n    });\n  }\n}\n","import getImagesByQuery from './js/pixabay-api';\nimport iziToast from 'izitoast';\n// Додатковий імпорт стилів\nimport 'izitoast/dist/css/iziToast.min.css';\nconst form = document.querySelector('form');\nimport {\n  clearGallery,\n  showLoader,\n  hideLoader,\n  loadMoreFunc,\n  hideLoadMoreButton,\n} from './js/render-functions';\n\nform.addEventListener('submit', onHandleSubmit);\n\nasync function onHandleSubmit(event) {\n  let page = 1;\n  event.preventDefault();\n  hideLoadMoreButton();\n  clearGallery();\n  const inputedValue = form.elements[0].value.trim();\n  showLoader();\n  if (inputedValue === '' || inputedValue === ' ') {\n    hideLoader();\n    hideLoadMoreButton();\n    iziToast.error({\n      message: 'You should type not empty value!',\n      position: 'topRight',\n      timeout: 2000,\n      icon: '',\n      imageWidth: 50,\n      maxWidth: 432,\n      messageSize: '16px',\n      messageLineHeight: '24px',\n      messageColor: '#FAFAFB',\n      backgroundColor: '#EF4040',\n    });\n    return;\n  } else {\n    await getImagesByQuery(inputedValue, page);\n    try {\n      loadMoreFunc(inputedValue);\n    } catch (error) {\n      console.log(error.message);\n      iziToast.error({\n        message:\n          'Sorry, there are no images matching your search query. Please try again!',\n        position: 'topRight',\n        timeout: 2000,\n        imageWidth: 50,\n        maxWidth: 432,\n        messageSize: '16px',\n        messageLineHeight: '24px',\n        messageColor: '#FAFAFB',\n        backgroundColor: '#EF4040',\n      });\n    } finally {\n      hideLoader();\n    }\n  }\n}\n"],"names":["gallery","galBox","SimpleLightbox","createMarkup","images","markup","image","clearGallery","showLoader","hideLoader","button","hideLoadMoreButton","loadMoreFunc","inputedValue","page","onHandleClick","getImagesByQuery","firstItem","height","query","responce","axios","loadMoreBtn","totalPages","error","iziToast","form","onHandleSubmit","event"],"mappings":"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"}